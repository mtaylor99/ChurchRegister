{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Build API Service with Clean Architecture",
			"type": "shell",
			"command": "dotnet build ChurchRegister.ApiService/ChurchRegister.ApiService.csproj",
			"problemMatcher": [
				"$msCompile"
			],
			"group": "build"
		},
		{
			"label": "Add Initial Migration",
			"type": "shell",
			"command": "dotnet ef migrations add InitialCreate --project ChurchRegister.Database --startup-project ChurchRegister.ApiService",
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Add Initial Migration (From Database Project)",
			"type": "shell",
			"command": "cd ChurchRegister.Database && dotnet ef migrations add InitialCreate --startup-project ../ChurchRegister.ApiService",
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Add Initial Migration Verbose",
			"type": "shell",
			"command": "dotnet ef migrations add InitialCreate --context ChurchRegisterWebContext --project ChurchRegister.Database --startup-project ChurchRegister.ApiService --verbose",
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Update Database",
			"type": "shell",
			"command": "dotnet ef database update --project ChurchRegister.Database --startup-project ChurchRegister.ApiService",
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Test Application Startup",
			"type": "shell",
			"command": "dotnet run --project ChurchRegister.ApiService",
			"isBackground": true,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Drop Database",
			"type": "shell",
			"command": "dotnet ef database drop --force --project ChurchRegister.Database --startup-project ChurchRegister.ApiService",
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Create Initial Migration",
			"type": "shell",
			"command": "dotnet ef migrations add InitialChurchRegisterMigration --project ChurchRegister.Database --startup-project ChurchRegister.ApiService --context ChurchRegisterWebContext --output-dir Migrations",
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Add Envelope Contribution Migration",
			"type": "shell",
			"command": "dotnet ef migrations add AddEnvelopeContributionBatch --project ChurchRegister.Database --startup-project ChurchRegister.ApiService --context ChurchRegisterWebContext",
			"group": "build"
		},
		{
			"label": "Add Envelope Contribution Migration",
			"type": "shell",
			"command": "dotnet ef migrations add AddEnvelopeContributionBatch --project ChurchRegister.Database --startup-project ChurchRegister.ApiService --context ChurchRegisterWebContext",
			"group": "build"
		},
		{
			"label": "Add Pastoral Care Migration",
			"type": "shell",
			"command": "dotnet ef migrations add AddPastoralCareRequired --project ChurchRegister.Database --startup-project ChurchRegister.ApiService --context ChurchRegisterWebContext",
			"group": "build"
		},
		{
			"label": "Update Database - Pastoral Care",
			"type": "shell",
			"command": "dotnet ef database update --project ChurchRegister.Database --startup-project ChurchRegister.ApiService",
			"group": "build"
		},
		{
			"label": "Remove All Migrations",
			"type": "shell",
			"command": "cd ChurchRegister.Database && dotnet ef migrations remove --force --startup-project ../ChurchRegister.ApiService && dotnet ef migrations remove --force --startup-project ../ChurchRegister.ApiService && dotnet ef migrations remove --force --startup-project ../ChurchRegister.ApiService"
		},
		{
			"label": "Remove All Migrations",
			"type": "shell",
			"command": "cd ChurchRegister.Database; dotnet ef migrations remove --force --startup-project ../ChurchRegister.ApiService; dotnet ef migrations remove --force --startup-project ../ChurchRegister.ApiService; dotnet ef migrations remove --force --startup-project ../ChurchRegister.ApiService"
		},
		{
			"label": "Build Tests Project",
			"type": "shell",
			"command": "dotnet build ChurchRegister.Tests/ChurchRegister.Tests.csproj"
		},
		{
			"label": "Run All Tests",
			"type": "shell",
			"command": "dotnet test ChurchRegister.Tests/ChurchRegister.Tests.csproj --no-build --logger \"console;verbosity=minimal\""
		},
		{
			"label": "Run Tests Summary",
			"type": "shell",
			"command": "dotnet test ChurchRegister.Tests/ChurchRegister.Tests.csproj --logger trx --verbosity normal 2>&1 | Select-String -Pattern 'passed|failed|skipped|error|Passed|Failed|Skipped|Error|Total'"
		},
		{
			"label": "Run Tests Errors Only",
			"type": "shell",
			"command": "dotnet test ChurchRegister.Tests/ChurchRegister.Tests.csproj --verbosity normal 2>&1 | Select-String -Pattern 'Failed|Error Message|Expected|Actual|Stack' -Context 0,3"
		},
		{
			"label": "Run Failed Tests",
			"type": "shell",
			"command": "dotnet test ChurchRegister.Tests/ChurchRegister.Tests.csproj --logger \"trx;LogFileName=testresults.trx\" --filter \"FullyQualifiedName~CreateChurchMember|FullyQualifiedName~SubmitEnvelopeBatch|FullyQualifiedName~GetContributionHistory_WithDate|FullyQualifiedName~GetContributionHistory_WithContributions|FullyQualifiedName~DuplicateBankReference|FullyQualifiedName~AnotherMembersBankReference\""
		},
		{
			"label": "Run All Tests Final",
			"type": "shell",
			"command": "dotnet test ChurchRegister.Tests/ChurchRegister.Tests.csproj --verbosity minimal"
		}
	]
}